"use strict";(self.webpackChunkkgenots=self.webpackChunkkgenots||[]).push([[37202],{10489:(e,t,n)=>{n.d(t,{T:()=>u});var s=n(65733),i=n(37531);const o=["<a>","<b>","<i>","<q>","<s>"];function r(e){e=(e=e.split(" ").map((e=>{if(i.l.test(e)){const t=i.l.exec(e);e=e.replace(t[0],`<a>${t[0]}</a>`)}else{if(i.j.test(e)){const t=i.j.exec(e);e=e.replace(t[0],`<b>${t[1]}</b>`)}if(i.k.test(e)){const t=i.k.exec(e);e=e.replace(t[0],`<i>${t[1]}</i>`)}if(i.m.test(e)){const t=i.m.exec(e);e=e.replace(t[0],`<s>${t[1]}</s>`)}}return e})).join(" ")).split(" ").map(((e,t)=>">"!==e||0!==t&&">"!==e[t-1]?e:"<q></q>")).join(" ");const[t]=a(e);return t}const a=(e,t="")=>{const n=[];if(0===e.length)return[n,0];let s=0;for(;s<e.length;){if(t.length&&t===e.substring(s,s+t.length))return[n,s+t.length];if(o.includes(e.substring(s,s+3))){const[t,i]=a(e.substring(s+3),`</${e[s+1]}>`);n.push({type:e[s+1],content:1===t.length&&"plain_text"===t[0].type?t[0].content:t}),s+=i+3}else{let t=n[n.length-1];t&&"plain_text"===t.type||(n.push({type:"plain_text",content:""}),t=n[n.length-1]),t.content+=e[s],s++}}return[n,s]},l=(e,t,n)=>0===e.trim().length?`${t}${e}${t}`:n(e),c=e=>e.map((e=>{switch(e.type){case"a":if("string"==typeof e.content)return t=e.content,(0,s.h)("a",{class:"link",href:t,target:"_blank",rel:"noopener noreferrer"},t);case"b":return(e=>"string"==typeof e?l(e,"*",(e=>(0,s.h)("b",null,e))):(0,s.h)("b",null,c(e)))(e.content);case"i":return(e=>"string"==typeof e?l(e,"_",(e=>(0,s.h)("i",null,e))):(0,s.h)("i",null,c(e)))(e.content);case"s":return(e=>"string"==typeof e?l(e,"~",(e=>(0,s.h)("s",null,e))):(0,s.h)("b",null,c(e)))(e.content);case"q":return(0,s.h)("span",{class:"block-quote"});default:return(e=>"string"==typeof e?e:(0,s.h)("p",null,c(e)))(e.content)}var t})),u=({message:e})=>{const t=e.slice(0,i.M),n=(0,i.f)(t,!0),o=(0,i.s)(t);return(0,s.h)("p",null,0!==n.length&&(0,s.h)("blockquote",null,n.split("\n").map((e=>{const t=r(e);return(0,s.h)("p",null,c(t))}))),o.split("\n").map((e=>{const t=r(e);return(0,s.h)("p",null,c(t))})))}},37531:(e,t,n)=>{n.d(t,{M:()=>A,T:()=>a,d:()=>i,e:()=>c,f:()=>m,g:()=>o,h:()=>r,i:()=>l,j:()=>d,k:()=>v,l:()=>E,m:()=>h,n:()=>g,p:()=>s,r:()=>u,s:()=>p});n(85114);const s=e=>{let t=null;try{const n=JSON.parse(e.message),{target:s,message:i}=n;t=void 0===s||void 0===i?e:Object.assign(Object.assign({},e),{targetUserIds:s,message:i})}catch(n){t=e}return t};function i(e,t){return e.localeCompare(t)}function o(e){return e.sort(((e,t)=>e.localeCompare(t))).join("_")}function r(e,t){if(null==e)return!0;for(const n of e)if("file"===n.kind){const e=n.getAsFile();n.type.startsWith("image/")?t("image",e):t("file",e)}}const a="dm__";function l(e){return e.isDirectMessage}function c(e){return[...new Set(e)].sort(i).join("<>")}function u(e){return e.split("").reverse().join("")}const d=/^\*([^*]*)\*/,v=/^_([^_]*)_/,h=/^~([^~]*)~/,E=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[:+~%/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[\w-]*))?)/,g=/<blockquote>[.\s\S]*<\/blockquote>\n\n/m;function m(e,t=!1){if(!g.test(e))return"";let n=0,s=13;return t&&(n=12,s=0),e.substring(e.indexOf("<blockquote>")+n,e.indexOf("</blockquote>")+s)}function p(e){return e.replace(g,"")}const A=2e3},60804:(e,t,n)=>{n.d(t,{g:()=>o});const s={get:(e,t,n)=>(...s)=>{try{return Reflect.get(e,t,n).apply(e,s)}catch(i){return null}}};let i;try{i=new Proxy(localStorage,s)}catch(r){i=new Proxy({},s)}const o=i},24555:(e,t,n)=>{n.d(t,{P:()=>r,a:()=>s,b:()=>d,c:()=>u,d:()=>a,e:()=>l,f:()=>c,i:()=>i,s:()=>o});const s=e=>!!o(e)&&("LIVESTREAM"===e.meta.viewType&&"ON_STAGE"!==e.stage.status),i=e=>{var t;return!!o(e)&&("LIVESTREAM"===e.meta.viewType&&(null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions.canLivestream))},o=e=>{var t;return(null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions.isV2)&&(null==e?void 0:e.livestream)};var r,a;!function(e){e.BUFFERING="Buffering",e.ENDED="Ended",e.IDLE="Idle",e.PLAYING="Playing",e.READY="Ready"}(r||(r={})),function(e){e.INITIALIZED="PlayerInitialized",e.QUALITY_CHANGED="PlayerQualityChanged",e.DURATION_CHANGED="PlayerDurationChanged",e.VOLUME_CHANGED="PlayerVolumeChanged",e.MUTED_CHANGED="PlayerMutedChanged",e.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",e.REBUFFERING="PlayerRebuffering",e.AUDIO_BLOCKED="PlayerAudioBlocked",e.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",e.ERROR="PlayerError",e.RECOVERABLE_ERROR="PlayerRecoverableError",e.ANALYTICS_EVENT="PlayerAnalyticsEvent",e.TIME_UPDATE="PlayerTimeUpdate",e.BUFFER_UPDATE="PlayerBufferUpdate",e.SEEK_COMPLETED="PlayerSeekCompleted",e.SESSION_DATA="PlayerSessionData",e.STATE_CHANGED="PlayerStateChanged",e.WORKER_ERROR="PlayerWorkerError",e.METADATA="PlayerMetadata",e.TEXT_CUE="PlayerTextCue",e.TEXT_METADATA_CUE="PlayerTextMetadataCue",e.AD_CUE="PlayerAdCue",e.STREAM_SOURCE_CUE="PlayerStreamSourceCue",e.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",e.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",e.SEGMENT_METADATA="PlayerSegmentMetadata",e.PLAYER_METADATA="PlayerMetadata"}(a||(a={}));const l=[a.TIME_UPDATE,a.BUFFER_UPDATE,a.TEXT_METADATA_CUE,a.PLAYER_METADATA],c=[a.REBUFFERING,a.AUDIO_BLOCKED,a.PLAYBACK_BLOCKED,a.ERROR,a.RECOVERABLE_ERROR,a.WORKER_ERROR,a.NETWORK_UNAVAILABLE,a.ANALYTICS_EVENT,a.PLAYBACK_RATE_CHANGED,a.QUALITY_CHANGED,a.INITIALIZED],u=e=>{var t,n,s,i,r,a;return!!o(e)&&("ALLOWED"===(null===(n=null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions)||void 0===n?void 0:n.canProduceAudio)||"ALLOWED"===(null===(i=null===(s=null==e?void 0:e.self)||void 0===s?void 0:s.permissions)||void 0===i?void 0:i.canProduceScreenshare)||"ALLOWED"===(null===(a=null===(r=null==e?void 0:e.self)||void 0===r?void 0:r.permissions)||void 0===a?void 0:a.canProduceVideo))},d=e=>{var t,n,s,i,r,a,l,c;return!!o(e)&&("NOT_ALLOWED"!==(null===(n=null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions)||void 0===n?void 0:n.canProduceAudio)||"NOT_ALLOWED"!==(null===(i=null===(s=null==e?void 0:e.self)||void 0===s?void 0:s.permissions)||void 0===i?void 0:i.canProduceScreenshare)||"NOT_ALLOWED"!==(null===(a=null===(r=null==e?void 0:e.self)||void 0===r?void 0:r.permissions)||void 0===a?void 0:a.canProduceVideo)||(null===(c=null===(l=null==e?void 0:e.self)||void 0===l?void 0:l.permissions)||void 0===c?void 0:c.canLivestream))}},21237:(e,t,n)=>{n.d(t,{P:()=>r,s:()=>a});const s=720,i=1280,o=(e,t,n,s,i,o)=>{const r=i,a=o,l=Math.min(n/r,s/a);let c,u,d,v,h=r*l,E=a*l,g=1;return h<n&&(g=n/h),Math.abs(g-1)<1e-14&&E<s&&(g=s/E),h*=g,E*=g,d=r/(h/n),v=a/(E/s),c=.5*(r-d),u=.5*(a-v),c<0&&(c=0),u<0&&(u=0),d>r&&(d=r),v>a&&(v=a),[c,u,d,v,e,t,n,s]};var r;!function(e){e.CAMERA="CAMERA",e.MIC="MIC",e.END="END"}(r||(r={}));const a=new class{constructor(){this.tracks=[],this.sources=[],this.enabled=!1}isSupported(){return!!window.chrome&&document.pictureInPictureEnabled}cleanup(){this.isSupported()&&void 0!==document.exitPictureInPicture&&null!==document.pictureInPictureElement&&document.exitPictureInPicture(),this.canvas=void 0,this.video=void 0,this.tracks=[],this.request=void 0}createCanvas(){const e=document.createElement("canvas");e.height=s,e.width=i,this.canvas=e}setupEvents(e){void 0!==navigator.mediaSession&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setActionHandler("hangup",(()=>{e(r.END)}))}mountAudioEvents(e){void 0!==navigator.mediaSession&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setActionHandler("togglemicrophone",(()=>{e(r.MIC)}))}mountVideoEvents(e){void 0!==navigator.mediaSession&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setActionHandler("togglecamera",(()=>{e(r.CAMERA)}))}unmountAudioEvents(){void 0!==navigator.mediaSession&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setActionHandler("togglemicrophone",void 0)}unmountVideoEvents(){void 0!==navigator.mediaSession&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setActionHandler("togglecamera",void 0)}drawGrid(e,t,n){if(void 0===this.canvas)return;const r=this.canvas.getContext("2d");r.fillStyle="#000000",r.fillRect(0,0,i,s);let a=0,l=0;for(;a<715;){let s=0;for(;s<1275&&l<n;){const n=this.tracks[l],[i,c,u,d,v,h,E,g]=o(s,a,e,t,n.videoWidth,n.videoHeight);r.drawImage(n,i,c,u,d,v,h,E,g),l+=1,s+=e}a+=t}}paintCanvas(){const e=this.tracks.length,[t,n]=(e=>{switch(e){case 0:case 1:return[i,s];case 2:return[Math.floor(640),s];case 3:case 4:return[Math.floor(640),Math.floor(360)];default:return[Math.floor(426.6666666666667),Math.floor(360)]}})(e);this.drawGrid(t,n,e)}animate(){void 0!==this.tracks&&this.paintCanvas(),void 0!==this.request&&(this.request=requestAnimationFrame((()=>this.animate())))}create(e,t,n){this.cleanup(),this.createCanvas(),this.setupEvents(n);const o=document.createElement("video");o.height=s,o.width=i,o.autoplay=!0,o.srcObject=this.canvas.captureStream(24),this.video=o,this.video.onloadedmetadata=()=>{try{e(),this.video.onleavepictureinpicture=()=>{t()}}catch(n){t(n.getMessage())}},this.paintCanvas()}updateMediaSession(e,t){void 0!==navigator.mediaSession&&(e===r.CAMERA&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setCameraActive(t),e===r.MIC&&void 0!==navigator.mediaSession.setMicrophoneActive&&navigator.mediaSession.setMicrophoneActive(t))}updateVideoSources(){const e=Object.values(this.sources).filter((e=>e.enabled)),t=[];e.map((e=>{t.push(e.element)})),this.tracks=t}enableSource(e){void 0!==this.sources[e]&&(this.sources[e].enabled=!0),this.updateVideoSources()}disableSource(e){void 0!==this.sources[e]&&(this.sources[e].enabled=!1),this.updateVideoSources()}addSource(e,t,n){this.sources[e]={element:t,enabled:n}}removeSource(e){delete this.sources[e]}removeAllSource(){this.sources=[]}enable(){this.enabled=!0,this.request=requestAnimationFrame((()=>this.animate())),this.video.requestPictureInPicture()}disable(){this.enabled=!1,cancelAnimationFrame(this.request),this.request=void 0,document.exitPictureInPicture()}}},82321:(e,t,n)=>{n.d(t,{s:()=>s});const s=(e,t=!0)=>{null!=e&&e.scrollTo({top:e.scrollHeight,behavior:t?"smooth":"auto"})}},46503:(e,t,n)=>{n.d(t,{o:()=>c,s:()=>l});var s=n(65733);const i=e=>!("isConnected"in e)||e.isConnected,o=((e,t)=>{let n;return(...s)=>{n&&clearTimeout(n),n=setTimeout((()=>{n=0,e(...s)}),t)}})((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(i))}),2e3),r=e=>"function"==typeof e?e():e,a=(e,t)=>{const n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],e.length--)},{state:l,onChange:c}=((e,t)=>{const n=((e,t=((e,t)=>e!==t))=>{const n=r(e);let s=new Map(Object.entries(null!=n?n:{}));const i={dispose:[],get:[],set:[],reset:[]},o=()=>{var t;s=new Map(Object.entries(null!==(t=r(e))&&void 0!==t?t:{})),i.reset.forEach((e=>e()))},l=e=>(i.get.forEach((t=>t(e))),s.get(e)),c=(e,n)=>{const o=s.get(e);t(n,o,e)&&(s.set(e,n),i.set.forEach((t=>t(e,n,o))))},u="undefined"==typeof Proxy?{}:new Proxy(n,{get:(e,t)=>l(t),ownKeys:e=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>s.has(t),set:(e,t,n)=>(c(t,n),!0)}),d=(e,t)=>(i[e].push(t),()=>{a(i[e],t)});return{state:u,get:l,set:c,on:d,onChange:(t,n)=>{const s=d("set",((e,s)=>{e===t&&n(s)})),i=d("reset",(()=>n(r(e)[t])));return()=>{s(),i()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(d("set",t.set)),t.get&&e.push(d("get",t.get)),t.reset&&e.push(d("reset",t.reset)),t.dispose&&e.push(d("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{i.dispose.forEach((e=>e())),o()},reset:o,forceUpdate:e=>{const t=s.get(e);i.set.forEach((n=>n(e,t,t)))}}})(e,t);return n.use((()=>{if("function"!=typeof s.a)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const n=(0,s.a)();n&&((e,t,n)=>{const s=e.get(t);s?s.includes(n)||s.push(n):e.set(t,[n])})(e,t,n)},set:t=>{const n=e.get(t);n&&e.set(t,n.filter(s.f)),o(e)},reset:()=>{e.forEach((e=>e.forEach(s.f))),o(e)}}})()),n})({})},85114:(e,t,n)=>{n.d(t,{a:()=>r,c:()=>l,g:()=>a,s:()=>o});var s=n(60804);const i="dyte-prefs",o=(e,t)=>{const n=JSON.parse(s.g.getItem(i)||"{}");n[e]=JSON.stringify(t),s.g.setItem("dyte-prefs",JSON.stringify(n))},r=e=>JSON.parse(s.g.getItem(i)||"{}")[e],a=()=>{const e=JSON.parse(s.g.getItem(i)||"{}");return{mirrorVideo:!e["mirror-video"]||"true"===e["mirror-video"],muteNotificationSounds:!!e["mute-notification-sounds"]&&"true"===e["mute-notification-sounds"]}},l={}}}]);