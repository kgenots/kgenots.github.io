"use strict";(self.webpackChunkkgenots=self.webpackChunkkgenots||[]).push([[5246],{9612:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>m,contentTitle:()=>u,default:()=>s,frontMatter:()=>o,metadata:()=>p,toc:()=>g});a(7294);var n=a(3905);function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})),t}function i(t,e){if(null==t)return{};var a,n,l=function(t,e){if(null==t)return{};var a,n,l={},r=Object.keys(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||(l[a]=t[a]);return l}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(l[a]=t[a])}return l}const o={title:"PostgreSQL \uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \uc608\uc2dc (ft. SaaS \uad6c\uc131)",slug:"pg-saas-multitenancy",tags:["DB","PostgreSQL"],image:"https://i.imgur.com/mErPwqL.png",hide_table_of_contents:!1},u=void 0,p={permalink:"/blog/pg-saas-multitenancy",source:"@site/blog/2023-11-13-pg-saas-multitenancy.md",title:"PostgreSQL \uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \uc608\uc2dc (ft. SaaS \uad6c\uc131)",description:"\uba40\ud2f0\ud14c\ub10c\uc2dc\uc758 \uc758\ubbf8\ub97c \uc54c\uc544\ubcf4\uace0 PostgreSQL \uc5d0\uc11c \uba40\ud2f0\ud14c\ub10c\uc2dc\ub97c \uad6c\uc131\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud574\uc11c \uc54c\uc544\ubd05\ub2c8\ub2e4.",date:"2023-11-13T00:00:00.000Z",formattedDate:"2023\ub144 11\uc6d4 13\uc77c",tags:[{label:"DB",permalink:"/blog/tags/db"},{label:"PostgreSQL",permalink:"/blog/tags/postgre-sql"}],readingTime:2.3433333333333333,hasTruncateMarker:!0,authors:[],frontMatter:{title:"PostgreSQL \uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \uc608\uc2dc (ft. SaaS \uad6c\uc131)",slug:"pg-saas-multitenancy",tags:["DB","PostgreSQL"],image:"https://i.imgur.com/mErPwqL.png",hide_table_of_contents:!1},nextItem:{title:"ERD \uc790\ub3d9 \uc0dd\uc131\ud558\ub294 \ubc29\ubc95 (ft. DB, SQLite)",permalink:"/blog/database-generate-erd"}},m={authorsImageUrls:[]},g=[{value:"\uba40\ud2f0\ud14c\ub10c\uc2dc(Multi-Tenancy)?",id:"\uba40\ud2f0\ud14c\ub10c\uc2dcmulti-tenancy",level:2},{value:"\uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \uc804\ub7b5",id:"\uba40\ud2f0\ud14c\ub10c\uc2dc-\uad6c\uc131-\uc804\ub7b5",level:2},{value:"Row Level",id:"row-level",level:3},{value:"Schema Level",id:"schema-level",level:3},{value:"Database Level",id:"database-level",level:3},{value:"\uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \ube44\uad50",id:"\uba40\ud2f0\ud14c\ub10c\uc2dc-\uad6c\uc131-\ube44\uad50",level:2},{value:"\ud544\uc790\uac00 \uc120\ud638\ud558\ub294 \uc804\ub7b5",id:"\ud544\uc790\uac00-\uc120\ud638\ud558\ub294-\uc804\ub7b5",level:2}],d={toc:g};function s(t){var{components:e}=t,a=i(t,["components"]);return(0,n.kt)("wrapper",r(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){l(t,e,a[e])}))}return t}({},d,a),{components:e,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"\uba40\ud2f0\ud14c\ub10c\uc2dc\uc758 \uc758\ubbf8\ub97c \uc54c\uc544\ubcf4\uace0 PostgreSQL \uc5d0\uc11c \uba40\ud2f0\ud14c\ub10c\uc2dc\ub97c \uad6c\uc131\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud574\uc11c \uc54c\uc544\ubd05\ub2c8\ub2e4."),(0,n.kt)("h2",{id:"\uba40\ud2f0\ud14c\ub10c\uc2dcmulti-tenancy"},"\uba40\ud2f0\ud14c\ub10c\uc2dc(Multi-Tenancy)?"),(0,n.kt)("p",null,"\uba3c\uc800, \ud14c\ub10c\uc2dc(Tenancy)\ub780 '\ucc28\uc6a9, \uc18c\uc791'\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4. '\uc784\ucc28'\ub77c\ub294 \ub2e8\uc5b4\ub97c \uc0ac\uc6a9\ud558\uba74 \uc870\uae08 \ub354 \uc774\ud574\uac00 \uc26c\uc6b8 \uac83 \uac19\uc2b5\ub2c8\ub2e4.\n\uc5ec\ub7ec \ud68c\uc0ac \ub610\ub294 \uac1c\uc778\uc774 \uac74\ubb3c\uc5d0 \uac01\uac01\uc758 \ud638\uc2e4\uc744 \uc784\ucc28\ud558\ub294 \uac83\uc744 '\uba40\ud2f0\ud14c\ub10c\uc2dc(Multi-Tenancy)'\ub85c \ube44\uc720\ud560 \uc218 \uc788\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4."),(0,n.kt)("h2",{id:"\uba40\ud2f0\ud14c\ub10c\uc2dc-\uad6c\uc131-\uc804\ub7b5"},"\uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \uc804\ub7b5"),(0,n.kt)("p",null,"\uba40\ud2f0\ud14c\ub10c\uc2dc\ub97c \uad6c\uc131\ud558\ub294 \uc804\ub7b5\uc740 \ub300\ud45c\uc801\uc73c\ub85c Row Level, Schema Level, Database Level 3\uac00\uc9c0\uac00 \uc788\uc2b5\ub2c8\ub2e4."),(0,n.kt)("h3",{id:"row-level"},"Row Level"),(0,n.kt)("p",null,"\ub2e8\uc77c\ud14c\ub10c\uc2dc\uc5d0\uc11c Foreign Key\ub97c \uc0ac\uc6a9\ud574\uc11c \ub370\uc774\ud130 \uad00\uacc4\uc744 \uad6c\uc131\ud558\ub4ef\uc774, Tenant\ub97c \uad00\ub9ac\ud560 \ubcc4\ub3c4\uc758 \ud14c\uc774\ube14\uc744 \uc791\uc131\ud558\uace0, tenant_id\ub97c \uac01 \ub370\uc774\ud130 \ud589\uc5d0 \ubd80\uc5ec\ud568\uc73c\ub85c\uc368 Row\uc758 \uc18c\uc720\uad8c\uc744 \uac00\uc9c0\uac8c\ub429\ub2c8\ub2e4."),(0,n.kt)("h3",{id:"schema-level"},"Schema Level"),(0,n.kt)("p",null,"PostgreSQL\uc758 \uacbd\uc6b0, Database \uc640 Table \uc0ac\uc774\uc5d0 Schema \ub77c\ub294 \uc77c\uc885\uc758 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub97c \uad6c\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \ub2e8\uc77c DB \ub0b4\uc5d0\uc11c Schema\ub97c \ud1b5\ud574 Tenant\ub97c \uad6c\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,n.kt)("h3",{id:"database-level"},"Database Level"),(0,n.kt)("p",null,"\ubaa8\ub4e0 \ud14c\ub10c\ud2b8\uc5d0 \ub300\ud574 \uc644\uc804\ud788 \ub2e4\ub978 DB\ub97c \uc124\uc815\ud569\ub2c8\ub2e4."),(0,n.kt)("h2",{id:"\uba40\ud2f0\ud14c\ub10c\uc2dc-\uad6c\uc131-\ube44\uad50"},"\uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \ube44\uad50"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"-"),(0,n.kt)("th",{parentName:"tr",align:null},"Row Level"),(0,n.kt)("th",{parentName:"tr",align:null},"Schema Level"),(0,n.kt)("th",{parentName:"tr",align:null},"Database Level"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\ud14c\ub10c\ud2b8 \uad6c\uc131 \uc2dc\uac04"),(0,n.kt)("td",{parentName:"tr",align:null},"\u26a1\ufe0f\ub9e4\uc6b0 \ube60\ub984"),(0,n.kt)("td",{parentName:"tr",align:null},"\ud83d\udc22 \ub290\ub9bc(\uc2a4\ud0a4\ub9c8 \uc0dd\uc131, \ud14c\uc774\ube14 \uc0dd\uc131)"),(0,n.kt)("td",{parentName:"tr",align:null},"\ud83d\udc0c\ub9e4\uc6b0 \ub290\ub9bc")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\ub370\uc774\ud130 \uc720\ucd9c \uc704\ud5d8"),(0,n.kt)("td",{parentName:"tr",align:null},"\uc704\ud5d8(tenant_id)"),(0,n.kt)("td",{parentName:"tr",align:null},"\ub35c \uc704\ud5d8(query)"),(0,n.kt)("td",{parentName:"tr",align:null},"\uc548\uc804(independent)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\uacf5\uc720\ud14c\uc774\ube14 \uc0dd\uc131, ",(0,n.kt)("br",null)," \ud14c\ub10c\ud2b8 \ubcd1\ud569"),(0,n.kt)("td",{parentName:"tr",align:null},"\ub9e4\uc6b0 \uc26c\uc6c0"),(0,n.kt)("td",{parentName:"tr",align:null},"SQL\ub85c \uc218\ud589 \uac00\ub2a5"),(0,n.kt)("td",{parentName:"tr",align:null},"SQL\ub85c \uc218\ud589 \ubd88\uac00")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"DB \ub9c8\uc774\uadf8\ub808\uc774\uc158"),(0,n.kt)("td",{parentName:"tr",align:null},"\u26a1\ufe0f\ub9e4\uc6b0 \ube60\ub984"),(0,n.kt)("td",{parentName:"tr",align:null},"\ud83d\udc22 \ub290\ub9bc(\uc2a4\ud0a4\ub9c8 \uc0dd\uc131, \ud14c\uc774\ube14 \uc0dd\uc131)"),(0,n.kt)("td",{parentName:"tr",align:null},"\ud83d\udc0c\ub9e4\uc6b0 \ub290\ub9bc")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\uc6b4\uc601 \uc624\ubc84\ud5e4\ub4dc"),(0,n.kt)("td",{parentName:"tr",align:null},"\uac70\uc758 \uc5c6\uc74c"),(0,n.kt)("td",{parentName:"tr",align:null},"\uac00\ub054 \ubc1c\uc0dd"),(0,n.kt)("td",{parentName:"tr",align:null},"\uc218\uc791\uc5c5")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\ubcf5\uc7a1\uc131"),(0,n.kt)("td",{parentName:"tr",align:null},"tenent_id\ub85c \uad00\ub9ac"),(0,n.kt)("td",{parentName:"tr",align:null},"search_path \ubc0f PG \uae30\ub2a5\uc73c\ub85c \ucee4\ubc84"),(0,n.kt)("td",{parentName:"tr",align:null},"...")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\ud14c\ub10c\ud2b8\ubcc4 \ub370\uc774\ud130 \ucd94\ucd9c"),(0,n.kt)("td",{parentName:"tr",align:null},"\ubc88\uac70\ub85c\uc6b4 \uc791\uc5c5"),(0,n.kt)("td",{parentName:"tr",align:null},"\uc26c\uc6c0"),(0,n.kt)("td",{parentName:"tr",align:null},"\uc26c\uc6c0")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\ud14c\ub10c\ud2b8\ubcc4 \uad6c\uc870 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5"),(0,n.kt)("td",{parentName:"tr",align:null},"\ubb38\uc81c"),(0,n.kt)("td",{parentName:"tr",align:null},"\uac00\ub2a5"),(0,n.kt)("td",{parentName:"tr",align:null},"\uac00\ub2a5")))),(0,n.kt)("h2",{id:"\ud544\uc790\uac00-\uc120\ud638\ud558\ub294-\uc804\ub7b5"},"\ud544\uc790\uac00 \uc120\ud638\ud558\ub294 \uc804\ub7b5"),(0,n.kt)("p",null,"\uc778\uc801 \uc790\uc6d0\uc758 Role\uc758 \uad6c\ubd84\uc774 \ub69c\ub837\ud55c (DBA) + SQL / (BE) DTO + DAO + Controller / (API) API \uac00 \uad00\ub9ac \uce21\uba74\uc5d0\uc11c \uc911\uc694\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4. \ud558\uc9c0\ub9cc, \uc11c\ube44\uc2a4\uc758 \ud655\uc7a5\uc131, \ub2e4\uc591\uc131\uc744 \uc704\ud574 \uac1c\ubc1c\uc758 \uc18d\ub3c4\uac00 \uc911\uc694\ud558\ub2e4\uace0 \ud310\ub2e8 \uc2dc, \uc544\ub798\uc640 \uac19\uc740 \uad6c\uc131\uc744 \uc120\ud638\ud558\ub294 \ud3b8\uc785\ub2c8\ub2e4."),(0,n.kt)("p",null,"ORM \uc744 \ud1b5\ud574 Database\uc758 \uae30\ubcf8\uc801\uc778 Table Schema\ub97c \uad00\ub9ac\ud558\uace0, \ud544\uc694 \uc2dc Schema(\ub124\uc784\uc2a4\ud398\uc774\uc2a4) \ub2e8\uc704\ub85c \ubcf5\uc81c\ud558\ub294 \ud615\uc2dd\uc744 \uc120\ud638\ud569\ub2c8\ub2e4."),(0,n.kt)("p",null,"\ub2e4\ub9cc ORM \ub97c \ud1b5\ud574 DB\ub97c \uad00\ub9ac\ud558\ub294 \uacbd\uc6b0, Transaction, Indexing \ub4f1 \uac00\uc7a5 \uae30\ubcf8\uc801\uc778 \ubd80\ubd84\uc744 \ub193\uce60 \uc218 \uc788\uc5b4 \uc870\uc2ec\ud574\uc57c\ud569\ub2c8\ub2e4."))}s.isMDXComponent=!0}}]);