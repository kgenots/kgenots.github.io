"use strict";(self.webpackChunkdyte_docs=self.webpackChunkdyte_docs||[]).push([[88512],{28815:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>u,default:()=>k,frontMatter:()=>s,metadata:()=>c,toc:()=>m});a(67294);var r=a(3905),o=a(93070),i=a(50551);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function d(e,t){if(null==e)return{};var a,r,o=function(e,t){if(null==e)return{};var a,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}const s={title:"Add Virtual Background to Dyte Meetings",sidebar_position:2},u=void 0,c={unversionedId:"capabilities/customization/add-virtual-background",id:"capabilities/customization/add-virtual-background",title:"Add Virtual Background to Dyte Meetings",description:"The virtual background feature allows you to enhance your video experience in various settings such as online meetings and conferences, virtual classrooms, live streaming sessions, and more. With a virtual background, you gain the flexibility to modify your background by blurring it, applying solid colors, or incorporating custom images. This capability allows for personalization and customization of your video environment, enabling you to create a more tailored visual experience.",source:"@site/docs/guides/capabilities/customization/add-virtual-background.mdx",sourceDirName:"capabilities/customization",slug:"/capabilities/customization/add-virtual-background",permalink:"/guides/capabilities/customization/add-virtual-background",draft:!1,editUrl:"https://github.com/dyte-in/docs/tree/main/docs/guides/capabilities/customization/add-virtual-background.mdx",tags:[],version:"current",lastUpdatedAt:1692164292,formattedLastUpdatedAt:"2023\ub144 8\uc6d4 16\uc77c",sidebarPosition:2,frontMatter:{title:"Add Virtual Background to Dyte Meetings",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Add a Custom Button to the Control Bar",permalink:"/guides/capabilities/customization/add-button-control-bar"},next:{title:"React Applications",permalink:"/guides/capabilities/customization/customize-meeting-icons/react-custom-iconpack"}},p={},m=[{value:"Understand Dyte&#39;s virtual background processing workflow",id:"understand-dytes-virtual-background-processing-workflow",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Install the background transformer package",id:"step-1-install-the-background-transformer-package",level:2},{value:"Step 2: Import the Dyte background transformer",id:"step-2-import-the-dyte-background-transformer",level:2},{value:"Step 3: Initialize the Dyte background transformer",id:"step-3-initialize-the-dyte-background-transformer",level:2},{value:"Step 4: Update the video middleware",id:"step-4-update-the-video-middleware",level:2},{value:"Add an image as a background",id:"add-an-image-as-a-background",level:3},{value:"Blur the background",id:"blur-the-background",level:3},{value:"Step 5: Integrate the video middleware into your Dyte meeting",id:"step-5-integrate-the-video-middleware-into-your-dyte-meeting",level:2},{value:"Remove the background",id:"remove-the-background",level:2}],g={toc:m};function k(e){var{components:t}=e,a=d(e,["components"]);return(0,r.kt)("wrapper",l(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){n(e,t,a[t])}))}return e}({},g,a),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The virtual background feature allows you to enhance your video experience in various settings such as online meetings and conferences, virtual classrooms, live streaming sessions, and more. With a virtual background, you gain the flexibility to modify your background by blurring it, applying solid colors, or incorporating custom images. This capability allows for personalization and customization of your video environment, enabling you to create a more tailored visual experience."),(0,r.kt)("p",null,"In this guide, we will walk you through the process of adding a custom virtual background to your Dyte meetings. You can add background to any of our supported web applications, ",(0,r.kt)("a",{parentName:"p",href:"/react-ui-kit"},"React"),", ",(0,r.kt)("a",{parentName:"p",href:"/angular-ui-kit"},"Angular"),", ",(0,r.kt)("a",{parentName:"p",href:"/ui-kit"},"JavaScript"),", and so on including UI Kit and core SDKs."),(0,r.kt)("h2",{id:"understand-dytes-virtual-background-processing-workflow"},"Understand Dyte's virtual background processing workflow"),(0,r.kt)("img",{src:"/static/guides/virtual-background.png",width:"800",height:"500",alt:"virtual-background",className:"add-virtual-background"}),(0,r.kt)("p",null,"The following steps outline the process flow for adding virtual background to the video stream of Dyte meetings:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Ask permission for media"),": Begin by requesting permission to access the user's media devices, such as their camera and microphone."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Capture (Real stream)"),": Capture the real-time video stream from the user's camera using the media capture capabilities of the browser."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Middleware 1- Apply background removal"),": Utilize the first middleware in the process to perform background removal on each frame of the captured video stream. This middleware applies the necessary logic to identify and remove the background from each frame."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Middleware 2 - Add specifications"),": Proceed to the second middleware, which adds specifications or modifications to the processed frames. This step allows for additional enhancements or alterations to the video stream based on the desired requirements."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Modified stream"),": After passing through the middleware, the video stream is modified to incorporate the background removal and added specifications."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Send over WebRTC"),": Transmit the modified video stream over the WebRTC (Web Real-Time Communication) protocol. This enables the stream to be sent to other participants or viewers in real-time."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"End user playback"),": Finally, the end user plays the received video stream as is, experiencing the effects of the background removal and added specifications.")),(0,r.kt)("p",null,"Throughout the process, the middleware components operate on a per-frame basis, executing the necessary logic to process each frame individually before forwarding it to the next stage of the workflow."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"Make sure you've read the Getting Started with Dyte topic and completed the following steps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a ",(0,r.kt)("a",{parentName:"li",href:"https://dev.dyte.io/"},"Dyte Developer Account")),(0,r.kt)("li",{parentName:"ul"},"Create ",(0,r.kt)("a",{parentName:"li",href:"https://dev.dyte.io/roles-presets"},"Presets")),(0,r.kt)("li",{parentName:"ul"},"Create a ",(0,r.kt)("a",{parentName:"li",href:"https://docs.dyte.io/api/?v=v2#/operations/create_meeting"},"Dyte Meeting")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.dyte.io/api/?v=v2#/operations/add_participant"},"Add Participant"),"\nto the meeting")),(0,r.kt)("p",null,"Once you\u2019ve integrated Dyte into your website or application successfully, perform the following steps to incorporate a virtual background feature into your Dyte meetings."),(0,r.kt)("h2",{id:"step-1-install-the-background-transformer-package"},"Step 1: Install the background transformer package"),(0,r.kt)("p",null,'To enable the virtual background feature in your application, first you need to install the "Background Transformer" package. The installation process varies depending on the framework or library you are using. Follow the instructions below based on your chosen technology:'),(0,r.kt)("p",null,"For React, Angular, and JavaScript frameworks or libraries, use the following command:"),(0,r.kt)(o.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm i @dytesdk/video-background-transformer\n"))),(0,r.kt)(i.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add @dytesdk/video-background-transformer\n"))),(0,r.kt)(i.Z,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm add @dytesdk/video-background-transformer\n")))),(0,r.kt)("p",null,"If you are using the web-core CDN script bundle, you can add the package by including a script tag in the head section of your HTML file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'<script src="https://cdn.jsdelivr.net/npm/@dytesdk/video-background-transformer/dist/index.iife.js"><\/script>\n')),(0,r.kt)("p",null,"If you prefer using a specific version of the package, you can modify the source URL by appending the desired version number:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'<script src="https://cdn.jsdelivr.net/npm/@dytesdk/video-background-transformer@1.1.3/dist/index.iife.js"><\/script>\n')),(0,r.kt)("p",null,"Whenever a new release of the package is available, you can simply update the version number in the source URL to upgrade to the latest version."),(0,r.kt)("h2",{id:"step-2-import-the-dyte-background-transformer"},"Step 2: Import the Dyte background transformer"),(0,r.kt)("p",null,"To utilize the functionalities of the Dyte Background Transformer package, you need to import it into your codebase. The import process differs based on the programming language or module system you are using. Choose the appropriate import method from the following options:"),(0,r.kt)("p",null,"For JavaScript environments or CommonJS module system, use the following syntax:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"var DyteVideoBackgroundTransformer = require('@dytesdk/video-background-transformer');\n")),(0,r.kt)("p",null,"If you are working with modern JavaScript or ECMAScript modules, use the import statement:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import DyteVideoBackgroundTransformer from '@dytesdk/video-background-transformer';\n")),(0,r.kt)("p",null,"If you installed the package using a script tag, the ",(0,r.kt)("inlineCode",{parentName:"p"},"DyteVideoBackgroundTransformer")," will be automatically available for use once the installation process is complete."),(0,r.kt)("h2",{id:"step-3-initialize-the-dyte-background-transformer"},"Step 3: Initialize the Dyte background transformer"),(0,r.kt)("p",null,"To begin using the Dyte Background Transformer, you need to initialize it by calling the ",(0,r.kt)("inlineCode",{parentName:"p"},"init")," method. Follow the steps below to initialize the transformer:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const videoBackgroundTransformer = await DyteVideoBackgroundTransformer.init();\n")),(0,r.kt)("p",null,"Make sure to use the ",(0,r.kt)("inlineCode",{parentName:"p"},"await")," keyword before the ",(0,r.kt)("inlineCode",{parentName:"p"},"init")," method call to ensure the initialization process is completed before proceeding further. Once the initialization is successful, the ",(0,r.kt)("inlineCode",{parentName:"p"},"videoBackgroundTransformer")," object will be ready for use in your application."),(0,r.kt)("h2",{id:"step-4-update-the-video-middleware"},"Step 4: Update the video middleware"),(0,r.kt)("p",null,"You can add any image as a background or simply blur your current setting."),(0,r.kt)("h3",{id:"add-an-image-as-a-background"},"Add an image as a background"),(0,r.kt)("p",null,"To incorporate an image as a background, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a static background video middleware using the ",(0,r.kt)("inlineCode",{parentName:"li"},"createStaticBackgroundVideoMiddleware")," method provided by the ",(0,r.kt)("inlineCode",{parentName:"li"},"videoBackgroundTransformer")," object."),(0,r.kt)("li",{parentName:"ol"},"Replace ",(0,r.kt)("inlineCode",{parentName:"li"},"IMAGE_LINK_OF_YOUR_LIKING")," with the URL of the image you wish to use.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const videoMiddleware =\n  await videoBackgroundTransformer.createStaticBackgroundVideoMiddleware(\n    `IMAGE_LINK_OF_YOUR_LIKING`\n  );\n")),(0,r.kt)("p",null,"For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const videoMiddleware =\n  await videoBackgroundTransformer.createStaticBackgroundVideoMiddleware(\n    `https://assets.dyte.io/backgrounds/bg-dyte-office.jpg`\n  );\n")),(0,r.kt)("admonition",{title:"note",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Ensure that the URL of the image allows Cross-Origin Resource Sharing (CORS) to avoid canvas tainting issues. If the CORS policy is not allowed for the image, it may result in the video feed getting stuck on a frame or appearing blank.")),(0,r.kt)("h3",{id:"blur-the-background"},"Blur the background"),(0,r.kt)("p",null,"To apply a blur effect to your background, follow these steps:"),(0,r.kt)("p",null,"Create a background blur video middleware using the ",(0,r.kt)("inlineCode",{parentName:"p"},"createBackgroundBlurVideoMiddleware")," method provided by the ",(0,r.kt)("inlineCode",{parentName:"p"},"videoBackgroundTransformer")," object."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const videoMiddleware =\n  await videoBackgroundTransformer.createBackgroundBlurVideoMiddleware(10);\n")),(0,r.kt)("p",null,"Adjust the intensity of the blur effect by changing the value within the parentheses. For example, using ",(0,r.kt)("inlineCode",{parentName:"p"},"10")," will result in a moderate blur effect. You can increase or decrease the value to achieve the desired level of blurring."),(0,r.kt)("h2",{id:""}),(0,r.kt)("h2",{id:"step-5-integrate-the-video-middleware-into-your-dyte-meeting"},"Step 5: Integrate the video middleware into your Dyte meeting"),(0,r.kt)("p",null,"To incorporate the configured video middleware into your Dyte meeting, add the middleware to your Dyte meeting."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"meeting.self.addVideoMiddleware(videoMiddleware);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If your video feed was already active, the specified background image or effect will immediately be applied as the background in your video feed.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"In case the video feed was not active, once you turn it on, the configured background will be automatically applied to your feed."))),(0,r.kt)("h2",{id:"remove-the-background"},"Remove the background"),(0,r.kt)("p",null,"To remove the middleware, simply run the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"meeting.self.removeVideoMiddleware(videoMiddleware);\n")))}k.isMDXComponent=!0}}]);