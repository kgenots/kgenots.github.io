"use strict";(self.webpackChunkkgenots_github_blog=self.webpackChunkkgenots_github_blog||[]).push([[1603],{8936:(e,s,l)=>{l.r(s),l.d(s,{assets:()=>a,contentTitle:()=>r,default:()=>o,frontMatter:()=>d,metadata:()=>i,toc:()=>c});var n=l(3159),t=l(7549);const d={title:"PostgreSQL \uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \uc804\ub7b5 (ft. SaaS \uad6c\uc131)",slug:"postgresql-saas-multitenancy",tags:["DB","PostgreSQL"],image:"/assets/blog/unnamed-postgresql.webp",hide_table_of_contents:!1},r=void 0,i={permalink:"/blog/postgresql-saas-multitenancy",source:"@site/blog/2023-11-13-posgresql-saas-multitenancy/index.md",title:"PostgreSQL \uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \uc804\ub7b5 (ft. SaaS \uad6c\uc131)",description:"\uba40\ud2f0\ud14c\ub10c\uc2dc\uc758 \uc758\ubbf8\ub97c \uc54c\uc544\ubcf4\uace0 PostgreSQL \uc5d0\uc11c \uba40\ud2f0\ud14c\ub10c\uc2dc\ub97c \uad6c\uc131\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud574\uc11c \uc54c\uc544\ubd05\ub2c8\ub2e4.",date:"2023-11-13T00:00:00.000Z",tags:[{label:"DB",permalink:"/blog/tags/db"},{label:"PostgreSQL",permalink:"/blog/tags/postgre-sql"}],readingTime:3.72,hasTruncateMarker:!0,authors:[],frontMatter:{title:"PostgreSQL \uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \uc804\ub7b5 (ft. SaaS \uad6c\uc131)",slug:"postgresql-saas-multitenancy",tags:["DB","PostgreSQL"],image:"/assets/blog/unnamed-postgresql.webp",hide_table_of_contents:!1},unlisted:!1,prevItem:{title:"Docker \uba85\ub839\uc5b4 \uc815\ub9ac (\uc774\ubbf8\uc9c0, \ucee8\ud14c\uc774\ub108)",permalink:"/blog/docker-commands"},nextItem:{title:"ERD \uc790\ub3d9 \uc0dd\uc131\ud558\ub294 \ubc29\ubc95 (ft. DB, SQLite)",permalink:"/blog/database-generate-erd"}},a={authorsImageUrls:[]},c=[{value:"\uba40\ud2f0\ud14c\ub10c\uc2dc(Multi-Tenancy) \ub780?",id:"\uba40\ud2f0\ud14c\ub10c\uc2dcmulti-tenancy-\ub780",level:2},{value:"\uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \uc804\ub7b5",id:"\uba40\ud2f0\ud14c\ub10c\uc2dc-\uad6c\uc131-\uc804\ub7b5",level:2},{value:"Silo Model (\uc0ac\uc77c\ub85c \ubaa8\ub378)",id:"silo-model-\uc0ac\uc77c\ub85c-\ubaa8\ub378",level:3},{value:"Pool Model (\ud480 \ubaa8\ub378)",id:"pool-model-\ud480-\ubaa8\ub378",level:3},{value:"Bridge Model (\ube0c\ub9bf\uc9c0 \ubaa8\ub378)",id:"bridge-model-\ube0c\ub9bf\uc9c0-\ubaa8\ub378",level:3},{value:"\uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \ube44\uad50",id:"\uba40\ud2f0\ud14c\ub10c\uc2dc-\uad6c\uc131-\ube44\uad50",level:2},{value:"\uc120\ud638\ud558\ub294 \uc804\ub7b5",id:"\uc120\ud638\ud558\ub294-\uc804\ub7b5",level:2},{value:"\ucc38\uace0\uc790\ub8cc",id:"\ucc38\uace0\uc790\ub8cc",level:2}];function h(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"\uba40\ud2f0\ud14c\ub10c\uc2dc\uc758 \uc758\ubbf8\ub97c \uc54c\uc544\ubcf4\uace0 PostgreSQL \uc5d0\uc11c \uba40\ud2f0\ud14c\ub10c\uc2dc\ub97c \uad6c\uc131\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud574\uc11c \uc54c\uc544\ubd05\ub2c8\ub2e4."}),"\n",(0,n.jsx)(s.h2,{id:"\uba40\ud2f0\ud14c\ub10c\uc2dcmulti-tenancy-\ub780",children:"\uba40\ud2f0\ud14c\ub10c\uc2dc(Multi-Tenancy) \ub780?"}),"\n",(0,n.jsx)(s.p,{children:"\uba3c\uc800, \ud14c\ub10c\uc2dc(Tenancy)\ub780 '\ucc28\uc6a9, \uc18c\uc791'\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4. \ud558\ub098\uc758 \uc778\uc2a4\ud134\uc2a4\ub85c \uc5ec\ub7ec \uace0\uac1d\uc5d0\uac8c \uc11c\ube44\uc2a4\ub97c \uc81c\uacf5\ud560 \uc218 \uc788\ub294 \uc18c\ud504\ud2b8\uc6e8\uc5b4 \uc544\ud0a4\ud14d\ucc98\ub97c '\uba40\ud2f0\ud14c\ub10c\uc2dc(Multi-Tenancy)'\ub77c\uace0 \ud569\ub2c8\ub2e4. \ubc18\ub300\ub418\ub294 \uac1c\ub150\uc73c\ub85c \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4 - \ub2e8\uc77c \uace0\uac1d\uc778 \uacbd\uc6b0 \ub2e8\uc77c \ud14c\ub10c\uc2dc\ub77c\uace0 \ud569\ub2c8\ub2e4."}),"\n",(0,n.jsx)(s.p,{children:"\ub2e4\uc2dc \ub9d0\ud574, \uba40\ud2f0 \ud14c\ub10c\uc2dc\ub294 \ud558\ub098\uc758 \uc11c\ube44\uc2a4 \ub0b4\uc5d0\uc11c '\uace0\uac1d\uc758 \uc815\ubcf4\ub97c \ubd84\ub9ac/\uad00\ub9ac'\ud558\ub294 \uac83\uc73c\ub85c \uc774\ud574\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,n.jsx)(s.h2,{id:"\uba40\ud2f0\ud14c\ub10c\uc2dc-\uad6c\uc131-\uc804\ub7b5",children:"\uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \uc804\ub7b5"}),"\n",(0,n.jsx)(s.p,{children:"\uba40\ud2f0\ud14c\ub10c\uc2dc\ub97c \uad6c\uc131\ud558\ub294 \uc804\ub7b5\uc740 \ub300\ud45c\uc801\uc73c\ub85c Silo \ubaa8\ub378, Pool \ubaa8\ub378, Bridge \ubaa8\ub378 3\uac00\uc9c0\uac00 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,n.jsxs)("table",{style:{textAlign:"center"},children:[(0,n.jsxs)("thead",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{width:"25%",rowSpan:"2",children:"Silo Model"}),(0,n.jsx)("th",{width:"50%",colSpan:"2",children:"Bridge Model"}),(0,n.jsx)("th",{width:"25%",rowSpan:"2",children:"Pool Model"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{width:"25%",children:"Database"}),(0,n.jsx)("th",{width:"25%",children:"Schema"})]})]}),(0,n.jsx)("tbody",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("img",{src:"/assets/blog/saas-postgresql-silo.png",alt:"saas-postgresql-silo"})}),(0,n.jsx)("td",{children:(0,n.jsx)("img",{src:"/assets/blog/saas-postgresql-bridge-dbs.png",alt:"saas-postgresql-bridge-dbs"})}),(0,n.jsx)("td",{children:(0,n.jsx)("img",{src:"/assets/blog/saas-postgresql-bridge-schemas.png",alt:"saas-postgresql-bridge-schemas"})}),(0,n.jsx)("td",{children:(0,n.jsx)("img",{src:"/assets/blog/saas-postgresql-pool.png",alt:"saas-postgresql-pool"})})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"silo-model-\uc0ac\uc77c\ub85c-\ubaa8\ub378",children:"Silo Model (\uc0ac\uc77c\ub85c \ubaa8\ub378)"}),"\n",(0,n.jsxs)(s.p,{children:["\uc0ac\uc77c\ub85c \ubaa8\ub378\uc740 \uac01 \ud14c\ub10c\ud2b8\uc5d0 \ub300\ud574\n",(0,n.jsx)("span",{style:{backgroundColor:"#fff5b1"},children:(0,n.jsx)("b",{children:"\ubcc4\ub3c4\uc758 DB Instance"})})," \ub97c \ubd80\uc5ec\ud558\ub294 \ubc29\ubc95\uc785\ub2c8\ub2e4.\n",(0,n.jsx)("span",{style:{textDecoration:"underline"},children:"\ubb3c\ub9ac\uc801/\ub17c\ub9ac\uc801\uc73c\ub85c \ud14c\ub10c\ud2b8 \uac04\uc758 \uc11c\ub85c \uc0c1\uad00 \uad00\uacc4\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),"\n\ubcf4\uc548 \ubb38\uc81c\ub098 \uaddc\uc81c\ub85c \uc778\ud574 \uace0\uac1d\uc774 \ucd94\uac00 \ube44\uc6a9\uc744 \uc9c0\ubd88\ud558\uace0 \ub370\uc774\ud130\uc758 \uc644\uc804 \ubd84\ub9ac\ub97c \uc6d0\ud558\ub294 \uacbd\uc6b0 \uc81c\uacf5\ud560 \uc218 \uc788\ub294 \uc11c\ube44\uc2a4 \ud615\ud0dc\uc785\ub2c8\ub2e4."]}),"\n",(0,n.jsx)(s.h3,{id:"pool-model-\ud480-\ubaa8\ub378",children:"Pool Model (\ud480 \ubaa8\ub378)"}),"\n",(0,n.jsxs)(s.p,{children:["\ud480 \ubaa8\ub378\uc740\n",(0,n.jsx)("span",{style:{backgroundColor:"#fff5b1"},children:(0,n.jsx)("b",{children:"\ub2e8\uc77c DB Instance, \ud589 \uc218\uc900 \ubcf4\uc548(RTS)"})}),"\n\ub97c \uc0ac\uc6a9\ud558\uc5ec \uad6c\ud604\ub429\ub2c8\ub2e4. ",(0,n.jsx)(s.code,{children:"tenant_id"})," \ub610\ub294 ",(0,n.jsx)(s.code,{children:"org_id"})," \uc640 \uac19\uc740 Foreign Key\ub97c \ud1b5\ud574 \ud14c\ub10c\ud2b8 \ub370\uc774\ud130\uc758 \uaca9\ub9ac\ub97c \uc720\uc9c0\ud569\ub2c8\ub2e4. \uc0ac\uc77c\ub85c \ubaa8\ub378\uc5d0 \ube44\ud574 \uc6b4\uc601 \uc624\ubc84\ud5e4\ub4dc\uac00 \ub354 \uc801\uc740 \uc7a5\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud14c\ub10c\ud2b8\ubcc4 \ub9ac\uc18c\uc2a4 \uad00\ub9ac(\ubd84\ub9ac) \ubc0f \ubd84\uc11d\uc774 \uc5b4\ub835\ub2e4\ub294 \ub2e8\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,n.jsx)(s.h3,{id:"bridge-model-\ube0c\ub9bf\uc9c0-\ubaa8\ub378",children:"Bridge Model (\ube0c\ub9bf\uc9c0 \ubaa8\ub378)"}),"\n",(0,n.jsxs)(s.p,{children:["\ube0c\ub9bf\uc9c0 \ubaa8\ub378\uc740 \uc0ac\uc77c\ub85c \ubaa8\ub378\uacfc \ud480 \ubaa8\ub378\uc744 \uc870\ud569\ud55c \ubc29\uc2dd\uc785\ub2c8\ub2e4. \ub2e8\uc77c DB Instance \ub0b4\ubd80\uc5d0\uc11c\n",(0,n.jsx)("span",{style:{textDecoration:"underline"},children:"\ub17c\ub9ac\uc801 Database \ubd84\ud560"}),"\n\ub610\ub294\n",(0,n.jsx)("span",{style:{textDecoration:"underline"},children:"\ud14c\ub10c\ud2b8\ubcc4\ub85c Schema \uc0dd\uc131 \ubc0f \uad00\ub9ac"}),"\n\ud569\ub2c8\ub2e4. \ud480 \ubaa8\ub378\uc758 \uacb0\ud569 \uc815\ub3c4\ub97c \ub04a\uc5b4\ub0b4\uace0, \ubb3c\ub9ac\uc801\uc73c\ub85c\ub294 \ub3d9\uc77c\ud55c DB Instance\ub97c \uc0ac\uc6a9\ud558\uae30\uc5d0 \uac01\uac01\uc758 \ub2e8\uc810\uc744 \ubcf4\uc644\ud560 \uc218 \uc788\ub294 \ubc29\ubc95\uc785\ub2c8\ub2e4."]}),"\n",(0,n.jsx)("span",{style:{backgroundColor:"#f1f8ff"},children:"PostgreSQL\uc758 \uacbd\uc6b0 Database \uc640 Table \uc0ac\uc774 Schema \ub77c\ub294 \uc77c\uc885\uc758 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub97c \uad6c\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,n.jsx)(s.h2,{id:"\uba40\ud2f0\ud14c\ub10c\uc2dc-\uad6c\uc131-\ube44\uad50",children:"\uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \ube44\uad50"}),"\n",(0,n.jsx)("figure",{style:{display:"flex",justifyContent:"center"},children:(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"-"}),(0,n.jsx)(s.th,{children:"Silo Model"}),(0,n.jsx)(s.th,{children:"Pool Model"}),(0,n.jsx)(s.th,{children:"Bridge Model"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"\ud14c\ub10c\ud2b8 \uad6c\uc131 \uc2dc\uac04"}),(0,n.jsx)(s.td,{children:"\ud83d\udc0c\ub9e4\uc6b0 \ub290\ub9bc"}),(0,n.jsx)(s.td,{children:"\u26a1\ufe0f\ub9e4\uc6b0 \ube60\ub984"}),(0,n.jsx)(s.td,{children:"\ud83d\udc22 \ub290\ub9bc(\uc2a4\ud0a4\ub9c8 \uc0dd\uc131, \ud14c\uc774\ube14 \uc0dd\uc131)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"\ub370\uc774\ud130 \uc720\ucd9c \uc704\ud5d8"}),(0,n.jsx)(s.td,{children:"\uc548\uc804(independent)"}),(0,n.jsx)(s.td,{children:"\uc704\ud5d8(tenant_id)"}),(0,n.jsx)(s.td,{children:"\ub35c \uc704\ud5d8(query)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:["\uacf5\uc720\ud14c\uc774\ube14 \uc0dd\uc131, ",(0,n.jsx)("br",{})," \ud14c\ub10c\ud2b8 \ubcd1\ud569"]}),(0,n.jsx)(s.td,{children:"SQL\ub85c \uc218\ud589 \ubd88\uac00"}),(0,n.jsx)(s.td,{children:"\ub9e4\uc6b0 \uc26c\uc6c0"}),(0,n.jsx)(s.td,{children:"SQL\ub85c \uc218\ud589 \uac00\ub2a5"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"DB \ub9c8\uc774\uadf8\ub808\uc774\uc158"}),(0,n.jsx)(s.td,{children:"\ud83d\udc0c\ub9e4\uc6b0 \ub290\ub9bc"}),(0,n.jsx)(s.td,{children:"\u26a1\ufe0f\ub9e4\uc6b0 \ube60\ub984"}),(0,n.jsx)(s.td,{children:"\ud83d\udc22 \ub290\ub9bc(\uc2a4\ud0a4\ub9c8 \uc0dd\uc131, \ud14c\uc774\ube14 \uc0dd\uc131)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"\uc6b4\uc601 \uc624\ubc84\ud5e4\ub4dc"}),(0,n.jsx)(s.td,{children:"\uc218\uc791\uc5c5"}),(0,n.jsx)(s.td,{children:"\uac70\uc758 \uc5c6\uc74c"}),(0,n.jsx)(s.td,{children:"\uac00\ub054 \ubc1c\uc0dd"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"\ubcf5\uc7a1\uc131"}),(0,n.jsx)(s.td,{children:"..."}),(0,n.jsx)(s.td,{children:"tenent_id\ub85c \uad00\ub9ac"}),(0,n.jsx)(s.td,{children:"search_path \ubc0f PG \uae30\ub2a5\uc73c\ub85c \ucee4\ubc84"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"\ud14c\ub10c\ud2b8\ubcc4 \ub370\uc774\ud130 \ucd94\ucd9c"}),(0,n.jsx)(s.td,{children:"\uc26c\uc6c0"}),(0,n.jsx)(s.td,{children:"\ubc88\uac70\ub85c\uc6b4 \uc791\uc5c5"}),(0,n.jsx)(s.td,{children:"\uc26c\uc6c0"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"\ud14c\ub10c\ud2b8\ubcc4 \uad6c\uc870 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5"}),(0,n.jsx)(s.td,{children:"\uac00\ub2a5"}),(0,n.jsx)(s.td,{children:"\ubb38\uc81c"}),(0,n.jsx)(s.td,{children:"\uac00\ub2a5"})]})]})]})}),"\n",(0,n.jsx)(s.h2,{id:"\uc120\ud638\ud558\ub294-\uc804\ub7b5",children:"\uc120\ud638\ud558\ub294 \uc804\ub7b5"}),"\n",(0,n.jsx)(s.p,{children:"BackEnd \ub294 \uc5ed\ud560\ubcc4\ub85c (DBA) DB + SQL / (BE) DTO + DAO + Controller / (API) API \ub85c \uad6c\ubd84\ub429\ub2c8\ub2e4."}),"\n",(0,n.jsxs)(s.p,{children:["\uc804\ud1b5\uc801\uc778 Role \uc911\uc2ec\uc758 \uad6c\uc870\uc640\ub294 \ub2ec\ub9ac \uc11c\ube44\uc2a4\uc758 \ud655\uc7a5\uc131, \ub2e4\uc591\uc131, \ubb34\uacb0\uc131\uc744 \ud0c0\ud611\ud560 \uc218 \uc788\ub2e4\uba74,\n",(0,n.jsxs)("span",{style:{backgroundColor:"#fff5b1"},children:["Schema\uac00 \ubd84\ub9ac\ub41c ",(0,n.jsx)("b",{children:"\ube0c\ub9bf\uc9c0 \ubaa8\ub378"})]}),"\uc744 ORM(SQLAlchemy, Prisma, TypeORM)\uc744 \ud1b5\ud574 \uad00\ub9ac\ud558\ub294 \ubc29\uc2dd\uc744 \uc120\ud638\ud558\ub294 \ud3b8\uc785\ub2c8\ub2e4."]}),"\n",(0,n.jsx)(s.p,{children:"\uc774 \ubc29\uc2dd\uc740 ORM\uc744 \ud1b5\ud574 \uae30\ubcf8 Schema\ub97c \uc0dd\uc131\ud558\uace0 \ud14c\ub10c\ud2b8\uac00 \uc720\uc785\ub420 \uc2dc, \ud574\ub2f9 Schema\ub97c \ubcf5\uc81c\ud558\ub294 \ubc29\ubc95\uc73c\ub85c \ud14c\ub10c\ud2b8\ubcc4 \ub370\uc774\ud130\ub97c \uaca9\ub9ac\ud558\ub294 \ubc29\uc2dd\uc785\ub2c8\ub2e4. \uc8fc\uc758\ud560 \uc810\uc73c\ub85c\ub294 SQL(Raw Query)\ub85c \uc9c1\uc811 Schema \ub97c \uad00\ub9ac\ud558\uac8c \ub418\uba74, Schema \ubcc4\ub85c \ub2e4\ub978 ERD \uad6c\uc131\uc774 \ub098\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub54c\ubb38\uc5d0 ORM\uc744 \ud1b5\ud574 \uae30\ubcf8 ERD \ub97c \uc218\uc815 \ubc0f \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud558\ub294 \uc804\ub7b5\uc744 \uc120\ud638\ud569\ub2c8\ub2e4."}),"\n",(0,n.jsx)(s.h2,{id:"\ucc38\uace0\uc790\ub8cc",children:"\ucc38\uace0\uc790\ub8cc"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://docs.aws.amazon.com/prescriptive-guidance/latest/saas-multitenant-managed-postgresql",children:"https://docs.aws.amazon.com/prescriptive-guidance/latest/saas-multitenant-managed-postgresql"})}),"\n"]})]})}function o(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);