"use strict";(self.webpackChunkkgenots=self.webpackChunkkgenots||[]).push([[55938,33850],{55938:(e,t,a)=>{a.r(t),a.d(t,{dyte_audio_tile:()=>r});var i=a(65733),o=(a(21237),a(24555),a(68753)),s=a(8934);a(60804);const r=class{constructor(e){(0,i.r)(this,e),this.onAudioUpdate=()=>{this.participant&&(this.isSpeaking=this.participant.audioEnabled)},this.meeting=void 0,this.config=void 0,this.size=void 0,this.states=void 0,this.iconPack=o.d,this.t=(0,s.u)(),this.participant=void 0,this.isSpeaking=!1}connectedCallback(){this.participantChanged(this.participant)}disconnectedCallback(){var e;null===(e=this.participant)||void 0===e||e.removeListener("audioUpdate",this.onAudioUpdate)}participantChanged(e){e&&(this.isSpeaking=e.audioEnabled,e.addListener("audioUpdate",this.onAudioUpdate))}render(){const e={meeting:this.meeting,size:this.size,config:this.config,states:this.states,iconPack:this.iconPack,t:this.t};return(0,i.h)(i.H,null,(0,i.h)("div",{class:{"avatar-ctr":!0,speaking:this.isSpeaking}},(0,i.h)("dyte-avatar",{participant:this.participant,size:this.size},!this.isSpeaking&&(0,i.h)("div",{class:"mic-icon"},(0,i.h)("dyte-icon",{icon:o.d.mic_off})))),(0,i.h)("dyte-name-tag",Object.assign({variant:"text",participant:this.participant},e)),(0,i.h)("slot",null))}static get watchers(){return{participant:["participantChanged"]}}};r.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column}.avatar-ctr{box-sizing:border-box;width:100%;flex:1 1 0%;padding:var(--dyte-space-1\\.5, 6px);border:2px solid transparent;border-radius:calc(var(--dyte-border-radius-xl, 40px) + var(--dyte-space-1\\.5, 6px))}.avatar-ctr.speaking{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2);--tw-shadow:var(--tw-shadow-colored)}dyte-avatar{aspect-ratio:1 / 1;height:100%;width:100%;border-radius:var(--dyte-border-radius-xl, 40px)}dyte-name-tag{display:block;height:var(--dyte-space-10, 40px);width:100%;text-align:center;line-height:2.5rem}:host([size='sm']) .avatar-ctr{border-radius:calc(var(--dyte-border-radius-lg, 12px) + var(--dyte-space-1\\.5, 6px))}:host([size='sm']) dyte-name-tag{height:var(--dyte-space-7, 28px);line-height:1.75rem}:host([size='sm']) dyte-avatar{border-radius:var(--dyte-border-radius-lg, 12px)}.mic-icon{position:absolute;bottom:calc(var(--dyte-space-1, 4px) * -1);right:calc(var(--dyte-space-1, 4px) * -1);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.mic-icon dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) .mic-icon dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='md']) .mic-icon dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}"},60804:(e,t,a)=>{a.d(t,{g:()=>s});const i={get:(e,t,a)=>(...i)=>{try{return Reflect.get(e,t,a).apply(e,i)}catch(o){return null}}};let o;try{o=new Proxy(localStorage,i)}catch(r){o=new Proxy({},i)}const s=o},24555:(e,t,a)=>{a.d(t,{P:()=>r,a:()=>i,b:()=>v,c:()=>l,d:()=>n,e:()=>d,f:()=>c,i:()=>o,s:()=>s});const i=e=>!!s(e)&&("LIVESTREAM"===e.meta.viewType&&"ON_STAGE"!==e.stage.status),o=e=>{var t;return!!s(e)&&("LIVESTREAM"===e.meta.viewType&&(null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions.canLivestream))},s=e=>{var t;return(null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions.isV2)&&(null==e?void 0:e.livestream)};var r,n;!function(e){e.BUFFERING="Buffering",e.ENDED="Ended",e.IDLE="Idle",e.PLAYING="Playing",e.READY="Ready"}(r||(r={})),function(e){e.INITIALIZED="PlayerInitialized",e.QUALITY_CHANGED="PlayerQualityChanged",e.DURATION_CHANGED="PlayerDurationChanged",e.VOLUME_CHANGED="PlayerVolumeChanged",e.MUTED_CHANGED="PlayerMutedChanged",e.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",e.REBUFFERING="PlayerRebuffering",e.AUDIO_BLOCKED="PlayerAudioBlocked",e.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",e.ERROR="PlayerError",e.RECOVERABLE_ERROR="PlayerRecoverableError",e.ANALYTICS_EVENT="PlayerAnalyticsEvent",e.TIME_UPDATE="PlayerTimeUpdate",e.BUFFER_UPDATE="PlayerBufferUpdate",e.SEEK_COMPLETED="PlayerSeekCompleted",e.SESSION_DATA="PlayerSessionData",e.STATE_CHANGED="PlayerStateChanged",e.WORKER_ERROR="PlayerWorkerError",e.METADATA="PlayerMetadata",e.TEXT_CUE="PlayerTextCue",e.TEXT_METADATA_CUE="PlayerTextMetadataCue",e.AD_CUE="PlayerAdCue",e.STREAM_SOURCE_CUE="PlayerStreamSourceCue",e.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",e.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",e.SEGMENT_METADATA="PlayerSegmentMetadata",e.PLAYER_METADATA="PlayerMetadata"}(n||(n={}));const d=[n.TIME_UPDATE,n.BUFFER_UPDATE,n.TEXT_METADATA_CUE,n.PLAYER_METADATA],c=[n.REBUFFERING,n.AUDIO_BLOCKED,n.PLAYBACK_BLOCKED,n.ERROR,n.RECOVERABLE_ERROR,n.WORKER_ERROR,n.NETWORK_UNAVAILABLE,n.ANALYTICS_EVENT,n.PLAYBACK_RATE_CHANGED,n.QUALITY_CHANGED,n.INITIALIZED],l=e=>{var t,a,i,o,r,n;return!!s(e)&&("ALLOWED"===(null===(a=null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions)||void 0===a?void 0:a.canProduceAudio)||"ALLOWED"===(null===(o=null===(i=null==e?void 0:e.self)||void 0===i?void 0:i.permissions)||void 0===o?void 0:o.canProduceScreenshare)||"ALLOWED"===(null===(n=null===(r=null==e?void 0:e.self)||void 0===r?void 0:r.permissions)||void 0===n?void 0:n.canProduceVideo))},v=e=>{var t,a,i,o,r,n,d,c;return!!s(e)&&("NOT_ALLOWED"!==(null===(a=null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions)||void 0===a?void 0:a.canProduceAudio)||"NOT_ALLOWED"!==(null===(o=null===(i=null==e?void 0:e.self)||void 0===i?void 0:i.permissions)||void 0===o?void 0:o.canProduceScreenshare)||"NOT_ALLOWED"!==(null===(n=null===(r=null==e?void 0:e.self)||void 0===r?void 0:r.permissions)||void 0===n?void 0:n.canProduceVideo)||(null===(c=null===(d=null==e?void 0:e.self)||void 0===d?void 0:d.permissions)||void 0===c?void 0:c.canLivestream))}},21237:(e,t,a)=>{a.d(t,{P:()=>r,s:()=>n});const i=720,o=1280,s=(e,t,a,i,o,s)=>{const r=o,n=s,d=Math.min(a/r,i/n);let c,l,v,h,u=r*d,p=n*d,E=1;return u<a&&(E=a/u),Math.abs(E-1)<1e-14&&p<i&&(E=i/p),u*=E,p*=E,v=r/(u/a),h=n/(p/i),c=.5*(r-v),l=.5*(n-h),c<0&&(c=0),l<0&&(l=0),v>r&&(v=r),h>n&&(h=n),[c,l,v,h,e,t,a,i]};var r;!function(e){e.CAMERA="CAMERA",e.MIC="MIC",e.END="END"}(r||(r={}));const n=new class{constructor(){this.tracks=[],this.sources=[],this.enabled=!1}isSupported(){return!!window.chrome&&document.pictureInPictureEnabled}cleanup(){this.isSupported()&&void 0!==document.exitPictureInPicture&&null!==document.pictureInPictureElement&&document.exitPictureInPicture(),this.canvas=void 0,this.video=void 0,this.tracks=[],this.request=void 0}createCanvas(){const e=document.createElement("canvas");e.height=i,e.width=o,this.canvas=e}setupEvents(e){void 0!==navigator.mediaSession&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setActionHandler("hangup",(()=>{e(r.END)}))}mountAudioEvents(e){void 0!==navigator.mediaSession&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setActionHandler("togglemicrophone",(()=>{e(r.MIC)}))}mountVideoEvents(e){void 0!==navigator.mediaSession&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setActionHandler("togglecamera",(()=>{e(r.CAMERA)}))}unmountAudioEvents(){void 0!==navigator.mediaSession&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setActionHandler("togglemicrophone",void 0)}unmountVideoEvents(){void 0!==navigator.mediaSession&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setActionHandler("togglecamera",void 0)}drawGrid(e,t,a){if(void 0===this.canvas)return;const r=this.canvas.getContext("2d");r.fillStyle="#000000",r.fillRect(0,0,o,i);let n=0,d=0;for(;n<715;){let i=0;for(;i<1275&&d<a;){const a=this.tracks[d],[o,c,l,v,h,u,p,E]=s(i,n,e,t,a.videoWidth,a.videoHeight);r.drawImage(a,o,c,l,v,h,u,p,E),d+=1,i+=e}n+=t}}paintCanvas(){const e=this.tracks.length,[t,a]=(e=>{switch(e){case 0:case 1:return[o,i];case 2:return[Math.floor(640),i];case 3:case 4:return[Math.floor(640),Math.floor(360)];default:return[Math.floor(426.6666666666667),Math.floor(360)]}})(e);this.drawGrid(t,a,e)}animate(){void 0!==this.tracks&&this.paintCanvas(),void 0!==this.request&&(this.request=requestAnimationFrame((()=>this.animate())))}create(e,t,a){this.cleanup(),this.createCanvas(),this.setupEvents(a);const s=document.createElement("video");s.height=i,s.width=o,s.autoplay=!0,s.srcObject=this.canvas.captureStream(24),this.video=s,this.video.onloadedmetadata=()=>{try{e(),this.video.onleavepictureinpicture=()=>{t()}}catch(a){t(a.getMessage())}},this.paintCanvas()}updateMediaSession(e,t){void 0!==navigator.mediaSession&&(e===r.CAMERA&&void 0!==navigator.mediaSession.setCameraActive&&navigator.mediaSession.setCameraActive(t),e===r.MIC&&void 0!==navigator.mediaSession.setMicrophoneActive&&navigator.mediaSession.setMicrophoneActive(t))}updateVideoSources(){const e=Object.values(this.sources).filter((e=>e.enabled)),t=[];e.map((e=>{t.push(e.element)})),this.tracks=t}enableSource(e){void 0!==this.sources[e]&&(this.sources[e].enabled=!0),this.updateVideoSources()}disableSource(e){void 0!==this.sources[e]&&(this.sources[e].enabled=!1),this.updateVideoSources()}addSource(e,t,a){this.sources[e]={element:t,enabled:a}}removeSource(e){delete this.sources[e]}removeAllSource(){this.sources=[]}enable(){this.enabled=!0,this.request=requestAnimationFrame((()=>this.animate())),this.video.requestPictureInPicture()}disable(){this.enabled=!1,cancelAnimationFrame(this.request),this.request=void 0,document.exitPictureInPicture()}}}}]);